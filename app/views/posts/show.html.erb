<% content_for(:title, @post.title) %>
<div class="max-w-3xl mx-auto px-4 py-8 flex flex-col">



<h1 class="text-xl font-semibold text-center mb-8"><%= t('.title') %></h1>
<div class="w-full bg-white rounded-2xl shadow-lg border border-gray-200 p-6 flex flex-col space-y-6 mb-10">
  <!-- 画像部分 -->
  <div class="flex justify-center mb-6">
    <% if @post.image.attached? && @post.image.content_type.in?(%w[image/jpeg image/png]) %>
      <%= image_tag @post.image, class: "max-w-full max-h-[600px] object-contain rounded-lg shadow-lg" %>
    <% else %>
      <%= image_tag "place_holder.png", class: "w-full max-h-[400px] object-cover rounded-lg shadow border border-gray-300" %>
    <% end %>
  </div>

  <!-- タイトル -->
  <h1 class="text-3xl font-bold text-center mb-4">『 <%= @post.title %> 』</h1>

  <!-- 投稿者や日時 -->
  <div class="text-center text-sm text-gray-500 mt-6">
    投稿者：<%= @post.user.name if @post.user %>
    / 投稿日：<%= l @post.created_at %>
  </div>

  <!-- 本文 -->
  <div class="prose prose-lg mx-auto text-gray-800 whitespace-pre-line mb-12">
    <%= @post.body %>
  </div>

  <!-- 編集・削除ボタン (自分の投稿であれば表示)-->
  <% if current_user&.own?(@post) %>
    <div class="flex justify-end space-x-4 mt-2">
      <%= link_to edit_post_path(@post), id: "button-edit-#{@post.id}", class: "text-blue-600 hover:underline" do %>
        編集
      <% end %>
      <%= link_to post_path(@post), id: "button-delete-#{@post.id}", method: :delete, data: { turbo_method: :delete, turbo_confirm: t('defaults.delete_confirm') }, class: "text-red-600 hover:underline" do %>
        削除
      <% end %>
  <% else %>
    <div class="flex justify-end space-x-4 mt-2">
      <%= render 'bookmark_buttons', { post: @post } %>
    </div>
  <% end %>
</div>

  <%= render 'comments/form', comment: @comment, post: @post %>
  <h3>コメント一覧</h3>
  <%= render @comments %>

  <!-- 戻るボタン -->
  <div class="flex justify-center mt-8">
    <%= link_to "一覧に戻る", posts_path, class: "bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition" %>
  </div>
</div>
